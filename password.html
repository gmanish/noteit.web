<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><!-- InstanceBegin template="/Templates/applicationdialog.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- InstanceBeginEditable name="doctitle" -->
<title>Untitled Document</title>
<!-- InstanceEndEditable -->
<!-- InstanceBeginEditable name="head" -->
<!-- InstanceEndEditable -->
<link href="css/noteit.css" rel="stylesheet" type="text/css" />
<style type="text/css">
	
	a:link {
		color: 				#E7C681;
		text-decoration: 	underline; 
		font-size: 			0.8em;
	}
	
	a:visited {
		color:	 			#E7C681;
		text-decoration: 	underline;
	}
	
	a:hover, a:active, a:focus {
		text-decoration: 	none;
	}
	
	.dialog_box {
		width: 				400px;
		min-width: 			400px;
		border:				thin;
		border-radius:		20px;
		padding:			20px;
	}

</style>

</head>

<body>
	<table align="center" cellpadding="0">
		<tr height="100px;">
			<td>
			</td>
		<tr>
			<td valign="middle">
				<div id="container" class="container dialog_box">
					<div id="logo" align="center">
						<img align="middle" src="img/logo.png" width="96" height="96" alt="Note It!" />
					</div>
					<div id="dialogbox" align="left">
					<!-- InstanceBeginEditable name="dialogcontent" -->
					<form 
						action="controller/appcontroller.php" 
						method="post" 
						enctype="application/x-www-form-urlencoded" 
						target="_self">
						
						<input name="command" type="hidden" value="do_login" />
						<table cellpadding="5px">
							<tr>
								<td>Email</td>
								<td>
									<input id="email_ID" name="email_ID" class="textButtonStyle" value="" />
								</td>
							</tr>
							<tr>
								<td>Old Password</td>
								<td>
									<input id="old_password" name="old_password" type="password" class="textButtonStyle" value=""/>
								</td>
							</tr>
							<tr>
								<td>New Password</td>
								<td>
									<input id="new_password" name="new_password" type="password" class="textButtonStyle" value=""/>
								</td>
							</tr>
							<tr>
								<td>Confirm Password</td>
								<td>
									<input id="confirm_password" name="confirm_password" type="password" class="textButtonStyle" value=""/>
								</td>
							</tr>
							<tr>
								<td colspan="2" align="right">
									<input name="cmdCancel" style="float:right" type="button" value="Cancel" class="appButton"/>
									<input name="cmdOK" style="float:right" type="submit" value="OK" class="appButton"/>
								</td>
							</tr>						
						</table>
					</form>
					
					<script type="text/javascript" src="js/jquery.js"></script>
					<script type="text/javascript">
						$(document).ready(function() {
							
							$('#cmdRegister').click (function() {
								var url="controller/appcontroller.php";
								var email = $('#email_ID').val();
								var old_password = $('#old_password').val();
								var new_password = $('#new_password').val();
								var confirmPassword = $('#confirm_password').val();
								if (email == "") {
									alert("Please enter a valid Email.");
									return;
								}
								else if (old_password == "" || new_password == "" || confirmPassword == "") {
									alert("Password cannot be empty.");
									return;
								} else if (password != confirmPassword) {
									alert("Passwords do not match.");
									return;
								}
								$.post(
									url,
									{ 
										command: 	"do_register", 
										first_name: $('#first_name').val(),
										last_name:	$('#last_name').val(),
										email_ID:	$('#email_ID').val(),
										password:	$('#password').val()
									},
									function(data) {
										try {
				                            var JSONObject = eval('(' + data + ')');
				                            if (JSONObject.JSONRetVal == 0) {
				                            	alert("Registration Successful. Please Log In.");
				                            	window.location = "login.html"; 
				                            } else {
				                            	alert(JSONObject.JSONRetMessage);
				                            }
										}
										catch (err) {
										}
									}
								);
							});
						});
					</script>

					<!-- InstanceEndEditable -->
					</div>
				</div>	
				<div align="center" id="footer" style="padding:20px;">
				<!-- InstanceBeginEditable name="DialogFooterLinks" -->
				DialogFooterLinks
				<!-- InstanceEndEditable -->
				</div>
			</td>
		</tr>
	</table>
</body>
<!-- InstanceEnd --></html>
